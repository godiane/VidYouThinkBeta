DROP TABLE USER;
DROP TABLE SEARCH_QUERY;
DROP TABLE SEARCH_RESULT;
DROP TABLE VIDEO;
DROP TABLE RATING;
DROP TABLE COMMENT;
DROP TABLE CAPTION;
DROP TABLE SENTIMENT_RATING;

CREATE TABLE `USER` (
	`ID` INT(50) unsigned NOT NULL AUTO_INCREMENT,
	`USERNAME` VARCHAR(200) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL,
	`EMAIL` VARCHAR(300) NOT NULL,
	`PASSWORD` VARCHAR(100) NOT NULL,
	`CONFIRM_CODE` VARCHAR(100) NOT NULL,
	`CREATE_TIMESTAMP` DATETIME DEFAULT CURRENT_TIMESTAMP,
	`UPDATE_TIMESTAMP` DATETIME ON UPDATE CURRENT_TIMESTAMP,
	PRIMARY KEY (`ID`,`USERNAME`,`EMAIL`)
);

CREATE TABLE `SEARCH_QUERY` (
	`ID` INT(50) unsigned NOT NULL AUTO_INCREMENT,
	`USER_ID` INT(50) unsigned NOT NULL,
	`QUERY` VARCHAR(1000) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL,
	`CREATE_TIMESTAMP` DATETIME DEFAULT CURRENT_TIMESTAMP,
	PRIMARY KEY (`ID`,`USER_ID`)
);

CREATE TABLE `SEARCH_RESULT` (
	`ID` INT(50) unsigned NOT NULL AUTO_INCREMENT,
	`SEARCH_QUERY_ID` INT(50) unsigned NOT NULL,
	`VIDEO_ID` INT(50) unsigned NOT NULL,
	PRIMARY KEY (`ID`,`SEARCH_QUERY_ID`,`VIDEO_ID`)
);

CREATE TABLE `VIDEO` (
	`ID` INT(50) unsigned NOT NULL AUTO_INCREMENT,
	`YT_ID` VARCHAR(1000) NOT NULL,
	`URL` VARCHAR(1000) NOT NULL,
	`TITLE` VARCHAR(1000) NOT NULL,
	`CHANNEL_TITLE` VARCHAR(1000) NOT NULL,
	`CATEGORY` VARCHAR(1000) NOT NULL,
	`DESCRIPTION` VARCHAR(500),
	`INSERT_TIMESTAMP` DATETIME DEFAULT CURRENT_TIMESTAMP,
	`INSERT_USER_ID` INT(50),
	PRIMARY KEY (`ID`,`YT_ID`)
);

CREATE TABLE `RATING` (
	`VIDEO_ID` INT(50) unsigned NOT NULL,
	`ID` INT(50) unsigned NOT NULL AUTO_INCREMENT,
	`RATING` VARCHAR(50) NOT NULL,
	`OVERALL_VIEW` INT(50) unsigned NOT NULL,
	`LIKES` INT(50) unsigned NOT NULL,
	`DISLIKES` INT(50) unsigned NOT NULL,
	`INSERT_TIMESTAMP` DATETIME DEFAULT CURRENT_TIMESTAMP,
	`INSERT_USER_ID` INT(50),
	PRIMARY KEY (`ID`,`VIDEO_ID`)
);

CREATE TABLE `COMMENT` (
	`VIDEO_ID` INT(50) unsigned NOT NULL,
	`ID` INT(50) unsigned NOT NULL AUTO_INCREMENT,
	`NAME` VARCHAR(100) NOT NULL,
	`COMMENT` VARCHAR(1000) NOT NULL,
	`INSERT_TIMESTAMP` DATETIME DEFAULT CURRENT_TIMESTAMP,
	`INSERT_USER_ID` INT(50),
	PRIMARY KEY (`ID`,`VIDEO_ID`)
);

CREATE TABLE `CAPTION` (
	`VIDEO_ID` INT(50) unsigned NOT NULL,
	`ID` INT(50) unsigned NOT NULL AUTO_INCREMENT,
	`CAPTION` TEXT(100000) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL,
	`INSERT_TIMESTAMP` DATETIME DEFAULT CURRENT_TIMESTAMP,
	`INSERT_USER_ID` INT(50),
	PRIMARY KEY (`ID`,`VIDEO_ID`)
);

CREATE TABLE `SENTIMENT_RATING` (
	`CAPTION_ID` INT(50) unsigned NOT NULL,
	`ID` INT(50) unsigned NOT NULL AUTO_INCREMENT,
	`RATING` TEXT(100) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL,
	`INSERT_TIMESTAMP`  DATETIME DEFAULT CURRENT_TIMESTAMP,
	`INSERT_USER_ID` INT(50),
	PRIMARY KEY (`ID`,`CAPTION_ID`)
);
